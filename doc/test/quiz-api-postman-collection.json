{
  "info": {
    "name": "Quiz API Collection",
    "description": "Collection ƒë·ªÉ test c√°c Quiz APIs: QuizConfig, QuizQuestion, QuizAttempt, QuizAnalytics",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_postman_id": "quiz-api-collection",
    "version": "1.0.0"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{jwt_token}}",
        "type": "string"
      }
    ]
  },
  "item": [
    {
      "name": "üéØ Quiz Config",
      "item": [
        {
          "name": "T·∫°o Quiz Config",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (responseCode.code === 201) {",
                  "  const response = pm.response.json();",
                  "  pm.environment.set('quiz_config_id', response.id);",
                  "  console.log('Quiz Config ID:', response.id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"pageBlockId\": \"{{page_block_id}}\",\n  \"title\": \"B√†i t·∫≠p To√°n Ch∆∞∆°ng 1\",\n  \"description\": \"Ki·ªÉm tra ki·∫øn th·ª©c v·ªÅ ph√©p c·ªông v√† tr·ª´ trong ph·∫°m vi 10\",\n  \"passingScore\": 70,\n  \"weight\": 2.0,\n  \"maxAttempts\": 3,\n  \"timeLimit\": 15,\n  \"shuffleQuestions\": true,\n  \"showFeedback\": true,\n  \"showCorrectAnswers\": true,\n  \"allowReview\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/quiz/config",
              "host": ["{{base_url}}"],
              "path": ["quiz", "config"]
            }
          }
        },
        {
          "name": "L·∫•y Quiz Config theo PageBlock",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/quiz/config/page-block/{{page_block_id}}",
              "host": ["{{base_url}}"],
              "path": ["quiz", "config", "page-block", "{{page_block_id}}"]
            }
          }
        },
        {
          "name": "C·∫≠p nh·∫≠t Quiz Config",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"passingScore\": 75,\n  \"maxAttempts\": 5,\n  \"timeLimit\": 20,\n  \"description\": \"B√†i t·∫≠p ƒë√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/quiz/config/{{quiz_config_id}}",
              "host": ["{{base_url}}"],
              "path": ["quiz", "config", "{{quiz_config_id}}"]
            }
          }
        },
        {
          "name": "X√≥a Quiz Config",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/quiz/config/{{quiz_config_id}}",
              "host": ["{{base_url}}"],
              "path": ["quiz", "config", "{{quiz_config_id}}"]
            }
          }
        }
      ]
    },
    {
      "name": "‚ùì Quiz Questions",
      "item": [
        {
          "name": "T·∫°o c√¢u h·ªèi Multiple Choice",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (responseCode.code === 201) {",
                  "  const response = pm.response.json();",
                  "  pm.environment.set('question_id', response.id);",
                  "  console.log('Question ID:', response.id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"quizConfigId\": \"{{quiz_config_id}}\",\n  \"questionText\": \"2 + 2 = ?\",\n  \"questionType\": \"multiple-choice\",\n  \"order\": 1,\n  \"points\": 2.0,\n  \"metadata\": {\n    \"options\": [\n      { \"id\": \"a\", \"text\": \"3\", \"isCorrect\": false },\n      { \"id\": \"b\", \"text\": \"4\", \"isCorrect\": true },\n      { \"id\": \"c\", \"text\": \"5\", \"isCorrect\": false },\n      { \"id\": \"d\", \"text\": \"6\", \"isCorrect\": false }\n    ],\n    \"feedback\": {\n      \"correct\": \"Ch√≠nh x√°c! 2 + 2 = 4\",\n      \"incorrect\": \"H√£y th·ª≠ l·∫°i nh√©! H√£y ƒë·∫øm l·∫°i t·ª´ ƒë·∫ßu.\"\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/quiz/question",
              "host": ["{{base_url}}"],
              "path": ["quiz", "question"]
            }
          }
        },
        {
          "name": "T·∫°o c√¢u h·ªèi True/False",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"quizConfigId\": \"{{quiz_config_id}}\",\n  \"questionText\": \"5 l·ªõn h∆°n 3. ƒê√∫ng hay sai?\",\n  \"questionType\": \"true-false\",\n  \"order\": 2,\n  \"points\": 1.0,\n  \"metadata\": {\n    \"correctAnswer\": true,\n    \"feedback\": {\n      \"correct\": \"ƒê√∫ng r·ªìi! 5 > 3\",\n      \"incorrect\": \"Sai r·ªìi! 5 l·ªõn h∆°n 3 nh√©!\"\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/quiz/question",
              "host": ["{{base_url}}"],
              "path": ["quiz", "question"]
            }
          }
        },
        {
          "name": "T·∫°o nhi·ªÅu c√¢u h·ªèi c√πng l√∫c",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"quizConfigId\": \"{{quiz_config_id}}\",\n  \"questionText\": \"3 + 5 = ?\",\n  \"questionType\": \"multiple-choice\",\n  \"order\": 3,\n  \"points\": 2.0,\n  \"metadata\": {\n    \"options\": [\n      { \"id\": \"a\", \"text\": \"7\", \"isCorrect\": false },\n      { \"id\": \"b\", \"text\": \"8\", \"isCorrect\": true },\n      { \"id\": \"c\", \"text\": \"9\", \"isCorrect\": false }\n    ]\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/quiz/question",
              "host": ["{{base_url}}"],
              "path": ["quiz", "question"]
            }
          }
        },
        {
          "name": "L·∫•y danh s√°ch c√¢u h·ªèi",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/quiz/question/quiz-config/{{quiz_config_id}}",
              "host": ["{{base_url}}"],
              "path": ["quiz", "question", "quiz-config", "{{quiz_config_id}}"]
            }
          }
        },
        {
          "name": "C·∫≠p nh·∫≠t c√¢u h·ªèi",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"questionText\": \"2 + 2 = ? (C√¢u h·ªèi ƒë√£ c·∫≠p nh·∫≠t)\",\n  \"points\": 3.0\n}"
            },
            "url": {
              "raw": "{{base_url}}/quiz/question/{{question_id}}",
              "host": ["{{base_url}}"],
              "path": ["quiz", "question", "{{question_id}}"]
            }
          }
        },
        {
          "name": "X√≥a c√¢u h·ªèi",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/quiz/question/{{question_id}}",
              "host": ["{{base_url}}"],
              "path": ["quiz", "question", "{{question_id}}"]
            }
          }
        }
      ]
    },
    {
      "name": "‚úçÔ∏è Quiz Attempts (Student Flow)",
      "item": [
        {
          "name": "1. B·∫Øt ƒë·∫ßu l√†m b√†i",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (responseCode.code === 201) {",
                  "  const response = pm.response.json();",
                  "  pm.environment.set('attempt_id', response.attemptId);",
                  "  console.log('Attempt ID:', response.attemptId);",
                  "  console.log('Attempt Number:', response.attemptNumber);",
                  "  console.log('Time Limit:', response.timeLimit, 'minutes');",
                  "  console.log('Total Questions:', response.questions.length);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"pageBlockId\": \"{{page_block_id}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/quiz/attempt/start",
              "host": ["{{base_url}}"],
              "path": ["quiz", "attempt", "start"]
            },
            "description": "B·∫Øt ƒë·∫ßu l√†m b√†i quiz. Nh·∫≠n v·ªÅ attemptId v√† danh s√°ch c√¢u h·ªèi (ƒë√£ x√°o tr·ªôn, kh√¥ng c√≥ ƒë√°p √°n ƒë√∫ng)"
          }
        },
        {
          "name": "2. Submit c√¢u tr·∫£ l·ªùi ƒë·∫ßu ti√™n",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"attemptId\": \"{{attempt_id}}\",\n  \"questionId\": \"{{question_id}}\",\n  \"userAnswer\": {\n    \"selectedOption\": \"b\"\n  },\n  \"timeSpent\": 45\n}"
            },
            "url": {
              "raw": "{{base_url}}/quiz/attempt/submit-answer",
              "host": ["{{base_url}}"],
              "path": ["quiz", "attempt", "submit-answer"]
            },
            "description": "Submit c√¢u tr·∫£ l·ªùi cho m·ªôt c√¢u h·ªèi. C√≥ th·ªÉ submit t·ª´ng c√¢u ho·∫∑c submit t·∫•t c·∫£ khi complete."
          }
        },
        {
          "name": "3. Ho√†n th√†nh b√†i t·∫≠p",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (responseCode.code === 200) {",
                  "  const response = pm.response.json();",
                  "  console.log('=== K·∫æT QU·∫¢ B√ÄI T·∫¨P ===');",
                  "  console.log('ƒêi·ªÉm:', response.score + '/' + response.maxScore);",
                  "  console.log('Ph·∫ßn trƒÉm:', response.percentage + '%');",
                  "  console.log('K·∫øt qu·∫£:', response.isPass ? 'ƒê·∫†T' : 'KH√îNG ƒê·∫†T');",
                  "  console.log('ƒêi·ªÉm ƒë·∫°t:', response.passingScore + '%');",
                  "  console.log('Th·ªùi gian:', response.duration, 'gi√¢y');",
                  "  console.log('ƒê√∫ng:', response.correctAnswers + '/' + response.totalQuestions);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"attemptId\": \"{{attempt_id}}\",\n  \"answers\": [\n    {\n      \"questionId\": \"{{question_id}}\",\n      \"userAnswer\": { \"selectedOption\": \"b\" },\n      \"timeSpent\": 45\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/quiz/attempt/complete",
              "host": ["{{base_url}}"],
              "path": ["quiz", "attempt", "complete"]
            },
            "description": "Ho√†n th√†nh b√†i t·∫≠p v√† nh·∫≠n k·∫øt qu·∫£ chi ti·∫øt. T·ª± ƒë·ªông t·∫°o xAPI statements."
          }
        }
      ]
    },
    {
      "name": "üìä Quiz Analytics",
      "item": [
        {
          "name": "L·∫•y Analytics t·ªïng quan",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/quiz-analytics/quiz/{{page_block_id}}",
              "host": ["{{base_url}}"],
              "path": ["quiz-analytics", "quiz", "{{page_block_id}}"]
            },
            "description": "L·∫•y analytics t·ªïng quan c·ªßa quiz: average score, pass rate, etc."
          }
        },
        {
          "name": "L·∫•y Analytics c√° nh√¢n",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/quiz-analytics/quiz/{{page_block_id}}?userId={{user_id}}",
              "host": ["{{base_url}}"],
              "path": ["quiz-analytics", "quiz", "{{page_block_id}}"],
              "query": [
                {
                  "key": "userId",
                  "value": "{{user_id}}",
                  "description": "L·ªçc theo user ID"
                }
              ]
            },
            "description": "L·∫•y analytics c·ªßa m·ªôt h·ªçc sinh c·ª• th·ªÉ"
          }
        },
        {
          "name": "Ph√¢n t√≠ch t·ª´ng c√¢u h·ªèi",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/quiz-analytics/questions/{{quiz_config_id}}",
              "host": ["{{base_url}}"],
              "path": ["quiz-analytics", "questions", "{{quiz_config_id}}"]
            },
            "description": "Ph√¢n t√≠ch chi ti·∫øt t·ª´ng c√¢u h·ªèi: correct rate, answer distribution, average time"
          }
        },
        {
          "name": "Performance c·ªßa t·ª´ng h·ªçc sinh",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/quiz-analytics/students/{{quiz_config_id}}",
              "host": ["{{base_url}}"],
              "path": ["quiz-analytics", "students", "{{quiz_config_id}}"]
            },
            "description": "Xem performance c·ªßa t·∫•t c·∫£ h·ªçc sinh: best score, average, attempts"
          }
        },
        {
          "name": "Analytics cho c·∫£ l·ªõp",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/quiz-analytics/class/{{quiz_config_id}}/{{class_id}}",
              "host": ["{{base_url}}"],
              "path": ["quiz-analytics", "class", "{{quiz_config_id}}", "{{class_id}}"]
            },
            "description": "Analytics t·ªïng h·ª£p cho c·∫£ l·ªõp: pass rate, student performances, question analytics"
          }
        },
        {
          "name": "T√≠nh to√°n v√† l∆∞u Analytics",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/quiz-analytics/calculate/{{page_block_id}}",
              "host": ["{{base_url}}"],
              "path": ["quiz-analytics", "calculate", "{{page_block_id}}"]
            },
            "description": "Trigger t√≠nh to√°n analytics (t·ª± ƒë·ªông ch·∫°y sau m·ªói attempt, nh∆∞ng c√≥ th·ªÉ ch·∫°y th·ªß c√¥ng)"
          }
        },
        {
          "name": "T√≠nh Analytics cho user c·ª• th·ªÉ",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/quiz-analytics/calculate/{{page_block_id}}?userId={{user_id}}",
              "host": ["{{base_url}}"],
              "path": ["quiz-analytics", "calculate", "{{page_block_id}}"],
              "query": [
                {
                  "key": "userId",
                  "value": "{{user_id}}"
                }
              ]
            }
          }
        }
      ]
    }
  ]
}
